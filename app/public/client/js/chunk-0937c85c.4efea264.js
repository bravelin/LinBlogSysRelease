(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0937c85c"],{"38b6":function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"page-container article-page"},[o("h2",{staticClass:"title"},[e._v("ES6标准入门笔记之九：Symbol")]),e._m(0),o("footer",[e._v("2017年05月13日")]),o("Comments"),o("Catalog",{attrs:{catalog:e.catalog}})],1)},l=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"content"},[o("h3",{staticClass:"title"},[e._v("概述")]),o("p",[e._v("ES5中对象属性名都是字符串，容易造成属性名的冲突。引入Symbol的目的就是解决这个问题。它是JavaScript语言的第七种类型（Undefined、NULL、Boolean、String、Number、Object）。")]),o("p",[e._v("Symbol值通过Symbol函数生成，可以接受一个字符串作为参数，表示对Symbol实例的描述，使之在控制台显示或者转为字符串时好区分。")]),o("pre",[o("code",[e._v("var s1 = Symbol('foo') // Symbol(foo)\nvar s2 = Symbol('bar') // Symbol(bar)")])]),o("p",[o("strong",[e._v("Symbol值不能与其他类型的值进行运算，否则报错。")])]),o("p",[e._v("Symbol值可以显示转为字符串或者布尔值，但是不能转为数值。")]),o("pre",[o("code",[e._v('var sym = Symbol()\nBoolean(sym) // true\nsym.toString() // "Symbol()"')])]),o("h3",{staticClass:"title"},[e._v("作为属性名的Symbol")]),o("p",[e._v("由于每个Symbol值都是不相等的，因此Symbol值可以作为标识符用于对象的属性名，保证不会出现同名的属性。")]),o("pre",[o("code",[e._v('var sym = Symbol()\nvar a = {}\na[sym] = "abc"\n\nvar b = { [sym]: "123" }')])]),o("p",[o("strong",[e._v("Symbol值作为对象属性名时不能使用点运算符。")])]),o("p",[e._v("Symbol类型可用于定义一组常量，可保证这组常量的值都是不相等的。")]),o("pre",[o("code",[e._v("log.levels = {\n    DEBUG: Symbol('debug'),\n    INFO: Symbol('info'),\n    WARN: Symbol('warn')\n}")])]),o("h3",{staticClass:"title"},[e._v("属性名的遍历")]),o("p",[e._v("Symbol作为属性名，该属性不会出现在for...in、for...of循环中，也不会被Object.keys()、Object.getOwnPropertyNames()返回。有一个Object.getOwnPropertySymbols方法可以指定对象的所有Symbol属性。")]),o("pre",[o("code",[e._v("var obj = { a: 111 }\nvar foo = Symbol('foo')\nvar bar = Symbol('bar')\nobj[foo] = '222'\nobj[bar] = '333'\nObject.getOwnPropertyNames(obj) // [\"a\"]\nObject.getOwnPropertySymbols(obj) // [Symbol(foo), Symbol(bar)]\nReflect.ownKeys(obj) // [\"a\", Symbol(foo), Symbol(bar)]")])]),o("p",[e._v("另外一个新的API：\n                "),o("strong",[e._v("Reflect.ownKeys")]),e._v("方法可以返回所有类型的键名（包括了Symbol键名）。")]),o("h3",{staticClass:"title"},[e._v("Symbol.for()、Symbol.keyFor()")]),o("p",[e._v("Symbol.for()接受一个字符串作为参数，搜索是否有以此参数作为名称的Symbol值。如果有，则返回这个Symbol值，否则新建并返回一个以该字符串作为名称的Symbol值。")]),o("pre",[o("code",[e._v("let s1 = Symbol.for('foo')\nlet s2 = Symbol.for('foo')\ns1 === s2 // true")])]),o("p",[o("strong",[e._v("Symbol.for()与Symbol()都会生成新的Symbol，区别在于前者会被登记在全局环境中供搜索，而后者不会。")]),e._v("Symbol.for()不会每次都返回新的Symbol值，而是会先检查给定的key是否存在，如果不存在才会返回新的值。")]),o("p",[e._v("Symbol.keyFor()方法返回一个已登记的Symbol类型值的key。")]),o("pre",[o("code",[e._v("var s1 = Symbol.for('foo')\nSymbol.keyFor(s1) // 'foo'\nvar s2 = Symbol()\nSymbol.keyFor(s2) // undefined")])]),o("p",[o("strong",[e._v("Symbol.for为Symbol值登记的名字是全局环境的，在不同的iframe后者service worker中可以取到相同的值。")])])])}],n=o("3ad6"),i={extends:n["a"]},a=i,s=o("4e82"),c=Object(s["a"])(a,r,l,!1,null,null,null);t["default"]=c.exports},"3ad6":function(e,t,o){"use strict";var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div")},l=[],n=(o("4634"),o("eb57")),i={data:function(){return{catalog:[],showPreview:!1,previewList:[],previewIndex:0}},mounted:function(){var e=this;e.$store.commit(n["a"].SWITCH_LOADING,!1),e.$nextTick((function(){window.addEventListener("scroll",e.doHandlerScroll);var t=document.querySelectorAll("code");t.length>0&&t.forEach((function(e){hljs.highlightBlock(e)}));var o=document.querySelectorAll("h3.title");if(o.length>0){var r=[],l=Math.round(1e6*Math.random()),n="";e.catalog=o.forEach((function(e,t){n="section"+l+"-"+t,e.setAttribute("id",n),r.push({text:e.innerHTML,id:n,el:e,active:!1})})),e.catalog=r}var i=document.querySelectorAll(".content figure>img");i.length>0&&e.getImageSize(0,i)}))},methods:{getImageSize:function(e,t){var o=this,r=new Image,l=t[e];r.onload=function(){o.previewList.push({src:l.src,w:this.width,h:this.height}),e++,e<t.length?o.getImageSize(e,t):o.$el.addEventListener("click",o.doPreview)},r.src=l.src},doPreview:function(e){var t=this;if(/img/i.test(e.target.tagName)&&!t.showPreview&&!e.target.classList.contains("pswp__img")){t.previewIndex=0;for(var o=0;o<t.previewList.length;o++)if(t.previewList[o].src==e.target.src){t.previewIndex=o;break}t.showPreview=!0}},doHandlerScroll:function(){for(var e,t,o=this,r=o.catalog.length-1;r>=0;r--)if(e=o.catalog[r].el,e.getBoundingClientRect().top<10){t=r;break}o.catalog=o.catalog.map((function(e,o){return e.active=o==t,e}))}},beforeDestroy:function(){var e=this;window.removeEventListener("scroll",e.doHandlerScroll),e.previewList.length>0&&e.$el.removeEventListener("click",e.doPreview)}},a=i,s=o("4e82"),c=Object(s["a"])(a,r,l,!1,null,null,null);t["a"]=c.exports},4634:function(e,t,o){for(var r=o("96dd"),l=o("7d56"),n=o("a6d5"),i=o("3f8b"),a=o("b8ea"),s=o("e3b3"),c=o("1277"),m=c("iterator"),b=c("toStringTag"),S=s.Array,v={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},y=l(v),f=0;f<y.length;f++){var d,g=y[f],u=v[g],p=i[g],h=p&&p.prototype;if(h&&(h[m]||a(h,m,S),h[b]||a(h,b,g),s[g]=S,u))for(d in r)h[d]||n(h,d,r[d],!0)}}}]);