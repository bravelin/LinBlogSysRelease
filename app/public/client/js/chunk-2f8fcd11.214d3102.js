(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f8fcd11"],{"12ee":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"phrases-page page-container",on:{scroll:e.doScroll}},[s("ul",{ref:"container",staticClass:"list"},e._l(e.list,function(t){return s("li",{key:t.id},[s("h4",[e._v(e._s(t.createdAt))]),s("h3",[e._v(e._s(t.content))]),s("div",[e._v("出自："+e._s(t.origin))])])}),0)])},i=[],o=s("4964"),r=s("eb57"),n=s("46f1"),c=s("f1ed"),l=15,p={name:"Phrases",data:function(){return{list:[],page:1,isLoading:!1,isOver:!1,scrollTop:0}},created:function(){var e=this,t=sessionStorage,s=t.getItem("phrase-list");s&&(e.list=JSON.parse(s));var a=t.getItem("phrase-over");a&&(e.isOver="1"==a);var i=t.getItem("phrase-top");i&&(e.scrollTop=i-0);var o=t.getItem("phrase-page");o&&o-0>1?e.page=o-0:e.getDataList(),e.$store.commit(r["a"].SWITCH_LOADING,!1)},mounted:function(){var e=this;e.$nextTick(function(){e.scrollTop&&setTimeout(function(){e.$el.scrollTop=e.scrollTop},300)})},methods:{doScroll:function(e){var t=this,s=t.$el,a=t.$refs.container,i=parseInt(getComputedStyle(a,null)["height"]),o=t.$store.state.winHeight;t.scrollTop=s.scrollTop,o+s.scrollTop+50>=i&&t.getDataList(t.page+1)},getDataList:function(e){var t=this;if(t.isOver)console.log("is over...");else{if(t.isLoading)return;t.isLoading=!0,e=e||t.page,t.$ajax({url:n["a"].GET_PHRASE,params:{page:e,pageSize:l}}).then(function(s){if(200==s.code){var a=s.data.dataList.map(function(e){return{id:e.id,content:e.content,origin:e.origin,createdAt:Object(c["b"])(new Date(e.createdAt),"yyyy/MM/dd hh:mm:ss")}});t.page=e,1==e?(t.$store.commit(r["a"].SWITCH_LOADING,!1),t.list=a):t.list=[].concat(Object(o["a"])(t.list),Object(o["a"])(a)),a.length<l&&(t.isOver=!0)}t.isLoading=!1})}}},beforeDestroy:function(){var e=this,t=sessionStorage;t.setItem("phrase-list",JSON.stringify(e.list)),t.setItem("phrase-page",e.page),t.setItem("phrase-over",e.isOver?"1":"0"),t.setItem("phrase-top",e.scrollTop)}},g=p,u=(s("8ac0"),s("17cc")),d=Object(u["a"])(g,a,i,!1,null,null,null);t["default"]=d.exports},3035:function(e,t,s){},"8ac0":function(e,t,s){"use strict";var a=s("3035"),i=s.n(a);i.a}}]);