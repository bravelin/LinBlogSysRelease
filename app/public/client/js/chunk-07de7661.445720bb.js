(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-07de7661"],{"09bd":function(t,e,n){},3122:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-container article-page"},[n("h2",{staticClass:"title"},[t._v("裕丰科技官网的开场动效实现")]),n("div",{staticClass:"content"},[n("h3",{staticClass:"title"},[t._v("动效1：旋转的白色圆圈")]),n("div",{staticClass:"ani-exp-wrap ani1-wrap"},[n("CircleRing",{ref:"ani1",on:{complete:function(e){return t.doCompleteAni1()}}}),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.ani1Status,expression:"!ani1Status"}],staticClass:"start-btn",on:{click:function(e){return t.doAni1()}}},[t._v("Play")])],1),n("p",[t._v("使用svg绘制，结合tweenMax，圆圈的当前弧线度数从0渐变到360度，并整体旋转了180度，动画时长1秒：")]),n("p",[t._v("组件结构，定义svg：")]),t._m(0),t._m(1),n("p",[t._v("绘制的方法，centerX和centerY是中心点的位置，radius为半径：")]),t._m(2),n("p",[t._v("圆圈会从0度位置开始旋转，如果要使它从-90度开始旋转，可以给svg添加如下样式：")]),t._m(3),n("h3",{staticClass:"title"},[t._v("动效2：水波上涨")]),n("div",{staticClass:"ani-exp-wrap ani2-wrap"},[n("WaveCircle",{ref:"ani2",attrs:{duration:5,dir:t.ani2Dir,needHide:!1,color:"#4ebefd"},on:{complete:function(e){return t.doCompleteAni2()}}}),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.ani2Status,expression:"!ani2Status"}],staticClass:"start-btn",on:{click:function(e){return t.doAni2()}}},[t._v("Play")])],1),n("p",[t._v("上面是加长了动画时间的效果，水波是两个点加一条圆弧构成：")]),t._m(4),n("p",[t._v("考虑动画的整个过程，只要知道了A、B两个点的位置，就可以绘制出上面的形状，而A点和B点是对称的。水波向上涨的时候，B点位置从90度位置渐变到-90度：")]),t._m(5),n("p",[t._v("绘制函数，AB之间可以使用贝塞尔曲线实现：")]),t._m(6),n("h3",{staticClass:"title"},[t._v("动效3：爆炸粒子")]),n("p")]),n("Comments"),n("Catalog",{attrs:{catalog:t.catalog}})],1)},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("pre",[n("code",[t._v('<svg xmlns="http://www.w3.org/2000/svg" :viewBox="\'0 0 \' + w + \' \' + w" :style="{ width: w + \'px\', height: w + \'px\' }">\n    <path :d="path" fill="none" stroke="#ffffff" :stroke-width="strokeWidth" :stroke-opacity="opacity"/>\n</svg>')])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("pre",[n("code",[t._v("startAni () {\n    const that = this\n    const tweenObj = { startDeg: 0, rangeDeg: 0 }\n    const duration = 1\n    new TweenMax(tweenObj, duration, {\n        rangeDeg: 2 * PI - 0.0000001,\n        startDeg: PI,\n        onUpdate () {\n            that.draw(tweenObj.startDeg, tweenObj.rangeDeg)\n        },\n        onComplete () {\n            console.log('ani complete...')\n        }\n    })\n}")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("pre",[n("code",[t._v("draw (startDeg, rangeDeg) {\n    const that = this\n    const endDeg = startDeg + rangeDeg\n    const x1 = that.centerX + Math.cos(startDeg) * that.radius\n    const y1 = that.centerY + Math.sin(startDeg) * that.radius\n    const x2 = that.centerX + Math.cos(endDeg) * that.radius\n    const y2 = that.centerY + Math.sin(endDeg) * that.radius\n    that.path = `M${x1} ${y1} A ${that.radius} ${that.radius} 0 ${rangeDeg > Math.PI ? 1 : 0} 1 ${x2} ${y2}`\n}")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("pre",[n("code",[t._v(".circle-ring-wrap>svg{\n    transform: rotate(-90deg);\n}")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("figure",{staticClass:"common"},[n("img",{staticStyle:{"max-width":"320px"},attrs:{src:"https://bravelin.top/group1/M00/00/60/fwAAAV3k1IeAM6dTAAANYyTqoPI551.png"}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("pre",[n("code",[t._v("startAni () {\n    const that = this\n    const tweenObj = { degree: 90, opacity: 1 }\n    new TweenMax(tweenObj, that.duration, {\n        degree: -89.9,\n        opacity: that.opacity,\n        delay: that.delay,\n        onUpdate () {\n            that.draw(tweenObj.degree, tweenObj.opacity)\n        },\n        onComplete () {\n            that.$emit('complete')\n        }\n    })\n}")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("pre",[n("code",[t._v("draw (degree, opacity) {\n    const that = this\n    const R = 100\n    const center = { x: 100, y: 100 }\n    let str = 'M'\n    const pos1x = center.x + R * Math.cos(degree * Math.PI / 180)\n    const pos1y = center.y + R * Math.sin(degree * Math.PI / 180)\n    str += `${pos1x} ${pos1y} A ${R} ${R} `\n    if (degree < 0) {\n        str += '0 1 1 '\n    } else {\n        str += '0 0 1 '\n    }\n    const pos2x = center.x + R * Math.cos((180 - degree) * Math.PI / 180)\n    const pos2y = center.y + R * Math.sin((180 - degree) * Math.PI / 180)\n    str += `${pos2x} ${pos2y} C `\n    const deltY = 30 * (90 - Math.abs(degree)) / 90\n    const dx = (pos1x - pos2x) / 4\n    if (that.dir) {\n        str += `${pos2x + dx} ${pos2y + deltY} ${pos1x - dx} ${pos1y - deltY} ${pos1x} ${pos1y} Z`\n    } else {\n        str += `${pos2x + dx} ${pos2y - deltY} ${pos1x - dx} ${pos1y + deltY} ${pos1x} ${pos1y} Z`\n    }\n    that.fillOpacity = opacity\n    that.pathData = str // svg的路径\n}")])])}],r=n("3ad6"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"circle-ring-wrap"},[n("svg",{style:{width:t.w+"px",height:t.w+"px"},attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 "+t.w+" "+t.w}},[n("path",{attrs:{d:t.path,fill:"none",stroke:"#ffffff","stroke-width":t.strokeWidth,"stroke-opacity":t.opacity}})])])},s=[],c=Math.PI,l={name:"CircleRing",data:function(){return{w:310,strokeWidth:2,opacity:1,radius:300,centerX:0,centerY:0,path:"",timer:null}},mounted:function(){var t=this;t.$nextTick((function(){t.computeSize()})),window.addEventListener("resize",t.computeSize)},methods:{startAni:function(){var t=this,e={startDeg:0,rangeDeg:0},n=1;new TweenMax(e,n,{rangeDeg:2*c-1e-7,startDeg:c,onUpdate:function(){t.draw(e.startDeg,e.rangeDeg)},onComplete:function(){t.$emit("complete")}})},hideAni:function(){var t=this,e={opacity:1,strokeWidth:2},n=.35;new TweenMax(e,n,{strokeWidth:0,opacity:0,onUpdate:function(){t.opacity=e.opacity,t.strokeWidth=e.strokeWidth}})},computeSize:function(){var t=this;t.radius=150,t.w=2*t.radius+10,t.centerX=t.w/2,t.centerY=t.w/2},draw:function(t,e){var n=this,a=t+e,i=n.centerX+Math.cos(t)*n.radius,r=n.centerY+Math.sin(t)*n.radius,o=n.centerX+Math.cos(a)*n.radius,s=n.centerY+Math.sin(a)*n.radius;n.path="M".concat(i," ").concat(r," A ").concat(n.radius," ").concat(n.radius," 0 ").concat(e>Math.PI?1:0," 1 ").concat(o," ").concat(s)}},beforeDestroy:function(){var t=this;window.removeEventListener("resize",t.computeSize)}},d=l,u=n("4e82"),h=Object(u["a"])(d,o,s,!1,null,null,null),p=h.exports,f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wave-circle-wrap"},[n("svg",{style:{transform:"scale("+t.scale+")"},attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 200 200"}},[n("path",{attrs:{d:t.pathData,fill:t.color,stroke:"none","fill-opacity":t.fillOpacity}})])])},g=[],v=(n("8f42"),{name:"WaveCircle",props:{color:{type:String,default:"#ad76fc"},opacity:{type:Number,default:1},dir:{type:Boolean,default:!0},duration:{type:Number,default:1.5},delay:{type:Number,default:0},scaleAni:{type:Boolean,default:!1},needHide:{type:Boolean,default:!0}},data:function(){return{pathData:"",fillOpacity:1,scale:1}},methods:{startAni:function(){var t=this,e={degree:90,opacity:1};new TweenMax(e,t.duration,{degree:-89.9,opacity:t.opacity,delay:t.delay,onUpdate:function(){t.draw(e.degree,e.opacity)},onComplete:function(){t.$emit("complete"),t.scaleAni?t.nextAni():t.needHide&&(t.$el.style.display="none")}})},draw:function(t,e){var n=this,a=100,i={x:100,y:100},r="M",o=i.x+a*Math.cos(t*Math.PI/180),s=i.y+a*Math.sin(t*Math.PI/180);r+="".concat(o," ").concat(s," A ").concat(a," ").concat(a," "),r+=t<0?"0 1 1 ":"0 0 1 ";var c=i.x+a*Math.cos((180-t)*Math.PI/180),l=i.y+a*Math.sin((180-t)*Math.PI/180);r+="".concat(c," ").concat(l," C ");var d=30*(90-Math.abs(t))/90,u=(o-c)/4;n.dir?r+="".concat(c+u," ").concat(l+d," ").concat(o-u," ").concat(s-d," ").concat(o," ").concat(s," Z"):r+="".concat(c+u," ").concat(l-d," ").concat(o-u," ").concat(s+d," ").concat(o," ").concat(s," Z"),n.fillOpacity=e,n.pathData=r},nextAni:function(){var t=this,e={scale:1};new TweenMax(e,.45,{scale:.45,onUpdate:function(){t.scale=e.scale},onComplete:function(){t.$emit("over"),t.needHide&&(t.$el.style.display="none")}})}}}),w=v,m=Object(u["a"])(w,f,g,!1,null,null,null),y=m.exports,x={extends:r["a"],components:{CircleRing:p,WaveCircle:y},data:function(){return{ani1Status:!1,ani2Status:!1,ani2Dir:!0}},mounted:function(){},methods:{doAni1:function(){this.$refs.ani1.startAni(),this.ani1Status=!0},doCompleteAni1:function(){this.ani1Status=!1},doAni2:function(){this.ani2Dir=!this.ani2Dir,this.$refs.ani2.startAni(),this.ani2Status=!0},doCompleteAni2:function(){this.ani2Status=!1}}},M=x,_=(n("33e7"),Object(u["a"])(M,a,i,!1,null,null,null));e["default"]=_.exports},"33e7":function(t,e,n){"use strict";var a=n("09bd"),i=n.n(a);i.a},"3ad6":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div")},i=[],r=(n("4634"),n("eb57")),o={data:function(){return{catalog:[],showPreview:!1,previewList:[],previewIndex:0}},mounted:function(){var t=this;t.$store.commit(r["a"].SWITCH_LOADING,!1),t.$nextTick((function(){window.addEventListener("scroll",t.doHandlerScroll);var e=document.querySelectorAll("code");e.length>0&&e.forEach((function(t){hljs.highlightBlock(t)}));var n=document.querySelectorAll("h3.title");if(n.length>0){var a=[],i=Math.round(1e6*Math.random()),r="";t.catalog=n.forEach((function(t,e){r="section"+i+"-"+e,t.setAttribute("id",r),a.push({text:t.innerHTML,id:r,el:t,active:!1})})),t.catalog=a}var o=document.querySelectorAll(".content figure>img");o.length>0&&t.getImageSize(0,o)}))},methods:{getImageSize:function(t,e){var n=this,a=new Image,i=e[t];a.onload=function(){n.previewList.push({src:i.src,w:this.width,h:this.height}),t++,t<e.length?n.getImageSize(t,e):n.$el.addEventListener("click",n.doPreview)},a.src=i.src},doPreview:function(t){var e=this;if(/img/i.test(t.target.tagName)&&!e.showPreview&&!t.target.classList.contains("pswp__img")){e.previewIndex=0;for(var n=0;n<e.previewList.length;n++)if(e.previewList[n].src==t.target.src){e.previewIndex=n;break}e.showPreview=!0}},doHandlerScroll:function(){for(var t,e,n=this,a=n.catalog.length-1;a>=0;a--)if(t=n.catalog[a].el,t.getBoundingClientRect().top<10){e=a;break}n.catalog=n.catalog.map((function(t,n){return t.active=n==e,t}))}},beforeDestroy:function(){var t=this;window.removeEventListener("scroll",t.doHandlerScroll),t.previewList.length>0&&t.$el.removeEventListener("click",t.doPreview)}},s=o,c=n("4e82"),l=Object(c["a"])(s,a,i,!1,null,null,null);e["a"]=l.exports},4634:function(t,e,n){for(var a=n("96dd"),i=n("7d56"),r=n("a6d5"),o=n("3f8b"),s=n("b8ea"),c=n("e3b3"),l=n("1277"),d=l("iterator"),u=l("toStringTag"),h=c.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=i(p),g=0;g<f.length;g++){var v,w=f[g],m=p[w],y=o[w],x=y&&y.prototype;if(x&&(x[d]||s(x,d,h),x[u]||s(x,u,w),c[w]=h,m))for(v in a)x[v]||r(x,v,a[v],!0)}}}]);