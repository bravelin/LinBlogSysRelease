(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10e3a5d6"],{2681:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-container article-page"},[n("h2",{staticClass:"title"},[e._v("ES6标准入门笔记之七：函数的扩展")]),e._m(0),n("footer",[e._v("2017年05月07日")]),n("Comments"),n("Catalog",{attrs:{catalog:e.catalog}})],1)},o=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content"},[n("h3",{staticClass:"title"},[e._v("函数参数的默认值")]),n("p",[e._v("ES6允许为函数参数设置默认值，直接写在参数定义的后面：")]),n("pre",[n("code",[e._v("function log (x, y = 'abc') { console.log(x, y) }\n\nfunction Point (x = 0, y = 0) {\n    this.x = x\n    this.y = y\n}")])]),n("p",[e._v("参数默认值可以与解构赋值的默认值结合起来使用：")]),n("pre",[n("code",[e._v("function fetch (url, { method = 'GET' } = { }) {\n    console.log(method)\n}\nfetch('http://example.com') // GET")])]),n("p",[e._v("上面调用fetch函数中，没有传入第二个参数。因此函数参数的默认值{}生效，之后是解构赋值的默认值生效。")]),n("p",[e._v("通常情况下，定义了默认值的参数应该是函数的\n                "),n("strong",[e._v("尾参数")]),e._v("。如果传入undefined，将触发该参数等于默认值。")]),n("p",[e._v("指定了默认值以后，函数的length属性将返回没有指定默认值的参数个数。也即是指定了函数参数默认值，length属性将失真。")]),n("pre",[n("code",[e._v("(function (a) {}).length // 1\n(function (a = 5) {}).length // 0")])]),n("p",[e._v("length属性是函数预期传入的参数个数。rest参数也不会计入length属性。")]),n("p",[e._v("如果参数默认值是一个变量，则该变量应当\n                "),n("strong",[e._v("先是当前函数的作用域，然后才是全局作用域。")])]),n("pre",[n("code",[e._v("var x = 1\nfunction f(x, y = x) { console.log(y) }\nf(2) // 2")])]),n("h3",{staticClass:"title"},[e._v("rest参数")]),n("p",[e._v("rest参数用于获取函数的多余参数，这样可以不用arguments对象。rest参数搭配的变量是一个数组，该变量将多余的参数放入其中。")]),n("pre",[n("code",[e._v("function add (...values) {\n    let sum = 0\n    for (var v of values) {\n        sum += v\n    }\n    return sum\n}\nadd(2, 3, 6) // 11")])]),n("p",[e._v("上面的add求和函数利用rest参数可以传入任意数目的参数。")]),n("p",[n("strong",[e._v("rest参数的变量代表一个数组，数组特有的方法都可以用于这个变量。")]),e._v("rest参数之后不能再有其他的参数（即只能是最后一个参数），否则报错。")]),n("h3",{staticClass:"title"},[e._v("扩展运算符")]),n("p",[e._v("扩展运算符是三个点（...），好比rest参数的逆运算，将一个数组转为用逗号分隔的参数序列。")]),n("pre",[n("code",[e._v("console.log(...[1, 2, 3]) // 1 2 3")])]),n("p",[e._v("该运算符主要用于函数调用：")]),n("pre",[n("code",[e._v("function push (array, ...items) {\n    array.push(...items)\n}\nfunction add (x, y) { return x + y }\nvar nums = [4, 38]\nadd(...nums) // 42")])]),n("p",[e._v("由于扩展运算符可以展开数组，因此不再需要apply方法将数组转为函数参数序列了。")]),n("pre",[n("code",[e._v("// ES5的写法\nfunction f(x, y, z) {}\nvar args = [1, 2, 3]\nf.apply(null, args)\n\n// ES6的写法\nf(...args)")])]),n("p",[e._v("扩展运算符提供了数组合并的新写法：")]),n("pre",[n("code",[e._v("// ES5的写法\n[1, 2].concat(more)\n// ES6的写法\n[1, 2, ...more]")])]),n("p",[e._v("与解构赋值结合起来可以生成数组：")]),n("pre",[n("code",[e._v("const [first, ...rest] = [1, 2, 3, 4, 5, 6]\nfirst // 1\nrest // [2, 3, 4, 5, 6]")])]),n("p",[n("strong",[e._v("如果将扩展运算符用于数组赋值，只能放在参数的最后一位，否则报错。")])]),n("p",[e._v("扩展运算符还可以将字符串转为真正的数组（并且能够正确识别32位的unicode字符）：")]),n("pre",[n("code",[e._v('[..."hello"] // ["h", "e", "l", "l", "o"]')])]),n("p",[e._v("返回正确的字符串长度可以这样求得：")]),n("pre",[n("code",[e._v("function len (str) { return [...str].length }")])]),n("p",[e._v("凡是涉及操作32位的Unicode字符都有这个问题，因此，最好都用扩展运算符改写：")]),n("pre",[n("code",[e._v("let str = 'x\\uD83D\\uDE80y'\nstr.split('').reverse().join('') // error\n[...str].reverse().join('') // good")])]),n("p",[e._v("任何类似数组的对象都可以使用扩展运算符转为真正的数组：")]),n("pre",[n("code",[e._v('var nodeList = document.querySelectorAll("div")\nvar array = [...nodeList]')])]),n("p",[n("strong",[e._v("扩展运算符内部调用的是数据结构的Iterator接口，因此只要具有Iterator接口的对象，都可以使用扩展运算符。")]),e._v("比如Map、Set、Generator函数。")]),n("pre",[n("code",[e._v("let map = new Map([ [1, 'one'], [2, 'two'], [3, 'three'] ])\nlet arr = [...map.keys()] // [1, 2, 3]\n\nvar go = function* () {\n    yield 1;\n    yield 2;\n    yield 3\n}\n[...go()] // [1, 2, 3]")])]),n("h3",{staticClass:"title"},[e._v("name属性")]),n("p",[e._v("函数的name属性会返回该函数的名称。")]),n("p",[e._v("如果将一个具名函数赋值给一个变量，name属性返回这个具名函数原本的名字。")]),n("pre",[n("code",[e._v('const bar = function abc() { }\nbar.name // "abc"')])]),n("p",[e._v("Function构造函数返回的函数实例，name属性的值为：anonymous")]),n("pre",[n("code",[e._v('(new Function).name // "anonymous"')])]),n("p",[e._v("bind返回的函数，name属性值会加上bound的前缀：")]),n("pre",[n("code",[e._v('function foo () {}\nfoo.bind({}).name // "bound foo"')])]),n("h3",{staticClass:"title"},[e._v("箭头函数")]),n("p",[e._v("使用箭头定义函数：")]),n("pre",[n("code",[e._v("var f = v => v\nvar f = () => v\nvar sum = (v1, v2) => { v1 = v1 * 2; return v1 + v2 }")])]),n("p",[e._v("需要注意的地方：")]),n("p",[n("strong",[e._v("1、函数体内的this对象就是定义时所在的对象，而不是使用时所在的对象；")])]),n("p",[n("strong",[e._v("2、不可以当做构造函数；")])]),n("p",[n("strong",[e._v("3、不可以使用arguments对象，该对象在函数体内不存在；可以使用rest参数代替；")])]),n("p",[n("strong",[e._v("4、不可以使用yield命令，因此箭头函数不能用作Generator函数；")])]),n("h3",{staticClass:"title"},[e._v("函数的绑定")]),n("p",[e._v("ES7提出函数绑定运算符（::），用来取代call、apply、bind的调用。该运算符自动将左边的对象作为上下文环境（this对象）绑定到右边的函数上。")]),n("pre",[n("code",[e._v("foo::bar // 等同于 bar.bind(foo)\nfoo::bar(...arguments) // 等同于 bar.apply(foo, arguments)")])]),n("p",[e._v("如果双冒号左边为空，右边是一个对象的方法，则等于将该方法绑定在该对象上。")]),n("pre",[n("code",[e._v("var method = obj::obj.foo // 等同于 var method = ::obj.foo\nlet log = ::console.log // 等同于 var log = console.log.bind(console)")])])])}],a=n("3ad6"),i={extends:a["a"]},s=i,l=n("4e82"),c=Object(l["a"])(s,r,o,!1,null,null,null);t["default"]=c.exports},"3ad6":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},o=[],a=(n("4634"),n("eb57")),i={data:function(){return{catalog:[],showPreview:!1,previewList:[],previewIndex:0}},mounted:function(){var e=this;e.$store.commit(a["a"].SWITCH_LOADING,!1),e.$nextTick((function(){window.addEventListener("scroll",e.doHandlerScroll);var t=document.querySelectorAll("code");t.length>0&&t.forEach((function(e){hljs.highlightBlock(e)}));var n=document.querySelectorAll("h3.title");if(n.length>0){var r=[],o=Math.round(1e6*Math.random()),a="";e.catalog=n.forEach((function(e,t){a="section"+o+"-"+t,e.setAttribute("id",a),r.push({text:e.innerHTML,id:a,el:e,active:!1})})),e.catalog=r}var i=document.querySelectorAll(".content figure>img");i.length>0&&e.getImageSize(0,i)}))},methods:{getImageSize:function(e,t){var n=this,r=new Image,o=t[e];r.onload=function(){n.previewList.push({src:o.src,w:this.width,h:this.height}),e++,e<t.length?n.getImageSize(e,t):n.$el.addEventListener("click",n.doPreview)},r.src=o.src},doPreview:function(e){var t=this;if(/img/i.test(e.target.tagName)&&!t.showPreview&&!e.target.classList.contains("pswp__img")){t.previewIndex=0;for(var n=0;n<t.previewList.length;n++)if(t.previewList[n].src==e.target.src){t.previewIndex=n;break}t.showPreview=!0}},doHandlerScroll:function(){for(var e,t,n=this,r=n.catalog.length-1;r>=0;r--)if(e=n.catalog[r].el,e.getBoundingClientRect().top<10){t=r;break}n.catalog=n.catalog.map((function(e,n){return e.active=n==t,e}))}},beforeDestroy:function(){var e=this;window.removeEventListener("scroll",e.doHandlerScroll),e.previewList.length>0&&e.$el.removeEventListener("click",e.doPreview)}},s=i,l=n("4e82"),c=Object(l["a"])(s,r,o,!1,null,null,null);t["a"]=c.exports},4634:function(e,t,n){for(var r=n("96dd"),o=n("7d56"),a=n("a6d5"),i=n("3f8b"),s=n("b8ea"),l=n("e3b3"),c=n("1277"),v=c("iterator"),d=c("toStringTag"),u=l.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},g=o(p),f=0;f<g.length;f++){var _,h=g[f],m=p[h],L=i[h],S=L&&L.prototype;if(S&&(S[v]||s(S,v,u),S[d]||s(S,d,h),l[h]=u,m))for(_ in r)S[_]||a(S,_,r[_],!0)}}}]);