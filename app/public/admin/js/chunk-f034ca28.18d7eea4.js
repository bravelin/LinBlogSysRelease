(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f034ca28"],{"3a5e":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"data-table-loading"},[a("v-progress-circular",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white",size:90}})],1)},s=[],o={name:"DataTableLoading",props:{show:{type:Boolean,default:!0}}},n=o,i=a("17cc"),l=Object(i["a"])(n,r,s,!1,null,null,null);e["a"]=l.exports},"3aef":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"resource-page page-container"},[a("v-layout",{staticClass:"pa-1",attrs:{row:"",wrap:""}},[a("div",{staticClass:"page-title"},[t._v("资源列表")]),a("v-spacer"),a("v-btn",{attrs:{depressed:"",dark:"",color:"indigo accent-1"},on:{click:function(e){return t.doAdd()}}},[t._v("新增")]),a("v-btn",{attrs:{depressed:"",dark:"",color:"green lighten-2"},on:{click:function(e){return t.doRefresh()}}},[t._v("刷新")])],1),a("DataList"),a("FormDialog"),a("Confirm",{attrs:{show:t.deleteDialogShow,message:t.deleteDialogMessage},on:{confirm:function(e){return t.doConfirmDel()},cancel:function(e){return t.doCloseDelDialog()}}})],1)},s=[],o=a("3556"),n=a("eb57"),i=a("0706"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-container pl-2 pr-2 pb-2"},[a("div",{staticClass:"search-input-wrap",attrs:{hidden:""}},[a("v-text-field",{attrs:{box:"","dont-fill-mask-blanks":"","single-line":"",color:"indigo accent-1",autocomplete:"off",disabled:t.dataLoading,"append-icon":"search",name:"searchKeys",label:"搜索...",type:"text",tabindex:"1",maxlength:"30"},on:{"click:append":function(e){return t.doSearch()}},model:{value:t.searchKeys,callback:function(e){t.searchKeys=e},expression:"searchKeys"}})],1),a("v-data-table",{attrs:{headers:t.headers,"hide-actions":"","disable-initial-sort":"",items:t.listData,"no-data-text":"Sorry！未能查询到数据！"},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[t._v(t._s(e.item.recordNo))]),a("td",[a("a",{staticClass:"link",attrs:{href:e.item.path,target:"_blank"}},[t._v(t._s(e.item.path))])]),a("td",[t._v(t._s(e.item.type))]),a("td",[t._v(t._s(e.item.fileSize))]),a("td",[t._v(t._s(e.item.remark))]),a("td",[e.item.isImage?a("img",{attrs:{src:e.item.path}}):t._e()]),a("td",[t._v(t._s(e.item.loginName))]),a("td",[t._v(t._s(e.item.createdAt))]),a("td",[a("v-btn",{staticClass:"red--text text--accent-1",attrs:{flat:"",small:""},on:{click:function(a){return t.deleteItem(e.item)}}},[t._v("删除")])],1)]}}])}),t.totalPage>0?a("div",{staticClass:"text-xs-center pt-3 pb-1"},[a("v-pagination",{attrs:{color:"indigo accent-1",circle:"",length:t.totalPage,"total-visible":7},on:{input:function(e){return t.doPageChange()}},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1):t._e(),a("Loading",{attrs:{show:t.dataLoading}})],1)},c=[],d=a("3a5e"),u=a("52c1"),p=i["a"].RES,m=Object(u["a"])(p).mapState,h={name:"ResDataList",computed:Object(o["a"])({},m(["dataLoading","listData","totalPage"])),components:{Loading:d["a"]},data:function(){return{headers:[{text:"序号",align:"center",value:"recordNo",sortable:!1},{text:"路径",align:"center",value:"path",sortable:!1},{text:"类型",align:"center",value:"type",sortable:!1},{text:"大小",align:"center",value:"fileSize",sortable:!1},{text:"备注",align:"center",value:"remark",sortable:!1},{text:"预览",align:"center",value:"preview",sortable:!1},{text:"作者",align:"center",value:"loginName",sortable:!1},{text:"添加时间",align:"center",value:"createdAt",sortable:!1},{text:"操作",align:"center",value:"actions",sortable:!1}],searchKeys:"",currentPage:1,currentPageSize:15}},created:function(){var t=this,e=t.$store,a=t.$route.query;t.searchKeys=a.key?decodeURIComponent(a.key):"",t.currentPage=(a.page||1)-0,t.currentPageSize=(a.size||15)-0,t.queryData(),e.commit(n["a"].SWITCH_LOADING,!1)},methods:{deleteItem:function(t){this.$store.commit(p+"/"+n["a"].CHANGE_RES_DELETE_DIALOG_STATUS,{show:!0,id:t.id,message:"确定要删除此资源？"})},doSearch:function(){var t=this;t.currentPage=1,t.searchKeys=t.searchKeys.trim(),t.queryData()},doPageChange:function(){this.queryData()},queryData:function(){var t=this,e=t.$store;e.dispatch(p+"/"+n["a"].GET_RES,{page:t.currentPage,size:t.currentPageSize,key:t.searchKeys})}}},f=h,g=a("17cc"),v=Object(g["a"])(f,l,c,!1,null,null,null),b=v.exports,_=a("9420"),x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{value:t.formDialogShow,width:"95%","max-width":"700px",persistent:""}},[a("v-card",[a("v-card-title",{staticClass:"deep-purple lighten-1 py-3 white--text text--darken-2",attrs:{"primary-title":""}},[t._v("添加资源")]),a("v-card-text",{staticClass:"pb-0"},[a("v-form",{staticClass:"pr-1"},[a("v-text-field",{ref:"pathInput",attrs:{"dont-fill-mask-blanks":"",disabled:"",error:t.pathError,autocomplete:"off",name:"path",label:"资源链接",type:"text",tabindex:"1",maxlength:"500"},model:{value:t.path,callback:function(e){t.path=e},expression:"path"}}),a("v-text-field",{ref:"typeInput",attrs:{"dont-fill-mask-blanks":"",disabled:"",error:t.typeError,autocomplete:"off",name:"type",label:"资源类型",type:"text",tabindex:"2",maxlength:"50"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}}),a("v-text-field",{ref:"sizeInput",attrs:{"dont-fill-mask-blanks":"",disabled:"",error:t.sizeError,autocomplete:"off",name:"size",label:"资源大小",type:"text",tabindex:"3",maxlength:"50"},model:{value:t.size,callback:function(e){t.size=e},expression:"size"}}),a("v-text-field",{ref:"remarkInput",attrs:{"dont-fill-mask-blanks":"",error:t.remarkError,autocomplete:"off",disabled:t.inprocess,name:"remark",label:"资源备注",type:"text",tabindex:"4",maxlength:"100"},model:{value:t.remark,callback:function(e){t.remark=e},expression:"remark"}})],1),a("div",{staticClass:"file-selector-wrap"},[a("v-btn",{attrs:{color:"green lighten-2",dark:""}},[t._v("选择文件")]),a("input",{ref:"fileup",attrs:{type:"file"},on:{change:function(e){return t.doUploadFile()}}})],1)],1),a("v-card-actions",{staticClass:"pb-3 pt-0"},[a("v-spacer"),a("v-btn",{attrs:{color:"indigo accent-1",dark:""},on:{click:function(e){return t.doCommit()}}},[t._v("确定")]),a("v-btn",{staticClass:"mr-2",attrs:{color:"blue lighten-1",dark:""},on:{click:function(e){return t.doClose()}}},[t._v("取消")])],1)],1),a("Loading",{attrs:{show:t.inprocess}})],1)},k=[],E=a("2919"),y=a("46f1"),C=i["a"].RES,S=Object(u["a"])(C).mapState,w="$store.state.".concat(C,".formDialogShow"),D={name:"ResFormDialog",components:{Loading:d["a"]},computed:Object(o["a"])({},S(["formDialogShow","formDialogAction","formDialogId"])),watch:Object(E["a"])({},w,function(t){var e=this;t||(e.path="",e.remark="",e.type="",e.size="",e.pathError=!1,e.remarkError=!1,e.typeError=!1,e.sizeError=!1,e.inprocess=!1)}),data:function(){return{path:"",remark:"",type:"",size:"",pathError:!1,remarkError:!1,typeError:!1,sizeError:!1,inprocess:!1}},methods:{doCommit:function(){var t=this,e=t.$store;t.doCheckForm()&&(t.inprocess=!0,e.dispatch(C+"/"+n["a"].ADD_RES,{id:t.formDialogId,path:t.path.trim(),remark:t.remark.trim(),type:t.type,size:t.size-0}).then(function(a){t.showMessage(a,!0),t.inprocess=!1,t.doClose(),e.dispatch(C+"/"+n["a"].GET_RES)},function(e){t.showMessage(e,!1),t.inprocess=!1}))},doClose:function(){var t=this;t.$store.commit(C+"/"+n["a"].CHANGE_RES_FORM_DIALOG_STATUS,!1)},doCheckForm:function(){var t=this,e=t.$refs;return t.path.trim()?(t.pathError=!1,!0):(e.pathInput.focus(),t.pathError=!0,t.showMessage("需要输入资源链接！",!1),!1)},showMessage:function(t,e){var a=this;a.$store.commit(n["a"].SWITCH_GLOABL_MESSAGE,{show:!0,content:t,status:e?"success":"error",delay:1500})},doUploadFile:function(){var t=this,e=t.$refs.fileup,a=e.files[0];if(a){t.inprocess=!0;var r=new FormData;r.append("multipartfiles",a),t.$ajax({url:y["a"].upload,method:"post",data:r,headers:{"Content-Type":"multipart/form-data"}}).then(function(e){console.log("upload res...",e),t.inprocess=!1,e&&e.url?(t.showMessage("上传成功！",!0),t.path=e.url,t.type=e.type,t.size=e.size):t.showMessage(e.message||"上传出错！",!1)},function(){t.showMessage("请求出错！",!1),t.inprocess=!1})}}}},A=D,L=Object(g["a"])(A,x,k,!1,null,null,null),z=L.exports,O=i["a"].RES,$=Object(u["a"])(O).mapState,R={name:"Res",components:{DataList:b,Confirm:_["a"],FormDialog:z},computed:Object(o["a"])({},$(["deleteDialogShow","deleteDialogMessage"])),methods:{doAdd:function(){var t=this;t.$store.commit(O+"/"+n["a"].CHANGE_RES_FORM_DIALOG_STATUS,!0)},doRefresh:function(){this.$store.dispatch(O+"/"+n["a"].GET_RES)},doConfirmDel:function(){var t=this,e=t.$store;t.doCloseDelDialog(),e.dispatch(O+"/"+n["a"].DELETE_RES).then(function(t){e.commit(n["a"].SWITCH_GLOABL_MESSAGE,{show:!0,content:t,status:"success",delay:1500}),e.dispatch(O+"/"+n["a"].GET_RES)},function(t){e.commit(n["a"].SWITCH_GLOABL_MESSAGE,{show:!0,content:t,status:"error",delay:1500})})},doCloseDelDialog:function(){this.$store.commit(O+"/"+n["a"].CHANGE_RES_DELETE_DIALOG_STATUS,{show:!1})}}},T=R,I=(a("b517"),Object(g["a"])(T,r,s,!1,null,null,null));e["default"]=I.exports},9420:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{value:t.show,width:"95%","max-width":"600px",persistent:""}},[a("v-card",[a("v-card-title",{staticClass:"deep-purple lighten-1 py-3 white--text text--darken-2",attrs:{"primary-title":""}},[t._v(t._s(t.title))]),a("v-card-text",{staticClass:"pa-4 red--text text--accent-1"},[t._v(t._s(t.message))]),a("v-card-actions",{staticClass:"pb-3 pt-0"},[a("v-spacer"),a("v-btn",{attrs:{color:"indigo accent-1",dark:""},on:{click:function(e){return t.doConfirm()}}},[t._v("确定")]),a("v-btn",{staticClass:"mr-2",attrs:{color:"blue lighten-1",dark:""},on:{click:function(e){return t.doCancel()}}},[t._v("取消")])],1)],1)],1)},s=[],o={name:"Confirm",props:{show:{type:Boolean,default:!1},title:{type:String,default:"提醒"},message:{type:String,default:""}},methods:{doConfirm:function(){this.$emit("confirm")},doCancel:function(){this.$emit("cancel")}}},n=o,i=a("17cc"),l=Object(i["a"])(n,r,s,!1,null,null,null);e["a"]=l.exports},b517:function(t,e,a){"use strict";var r=a("b74e"),s=a.n(r);s.a},b74e:function(t,e,a){}}]);