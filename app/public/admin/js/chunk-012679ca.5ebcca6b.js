(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-012679ca"],{"1af6":function(t,e,a){},"3a5e":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"data-table-loading"},[a("v-progress-circular",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white",size:90}})],1)},s=[],r={name:"DataTableLoading",props:{show:{type:Boolean,default:!0}}},n=r,i=a("17cc"),l=Object(i["a"])(n,o,s,!1,null,null,null);e["a"]=l.exports},"60ca":function(t,e,a){"use strict";var o=a("1af6"),s=a.n(o);s.a},9420:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{value:t.show,width:"95%","max-width":"600px",persistent:""}},[a("v-card",[a("v-card-title",{staticClass:"deep-purple lighten-1 py-3 white--text text--darken-2",attrs:{"primary-title":""}},[t._v(t._s(t.title))]),a("v-card-text",{staticClass:"pa-4 red--text text--accent-1"},[t._v(t._s(t.message))]),a("v-card-actions",{staticClass:"pb-3 pt-0"},[a("v-spacer"),a("v-btn",{attrs:{color:"indigo accent-1",dark:""},on:{click:function(e){return t.doConfirm()}}},[t._v("确定")]),a("v-btn",{staticClass:"mr-2",attrs:{color:"blue lighten-1",dark:""},on:{click:function(e){return t.doCancel()}}},[t._v("取消")])],1)],1)],1)},s=[],r={name:"Confirm",props:{show:{type:Boolean,default:!1},title:{type:String,default:"提醒"},message:{type:String,default:""}},methods:{doConfirm:function(){this.$emit("confirm")},doCancel:function(){this.$emit("cancel")}}},n=r,i=a("17cc"),l=Object(i["a"])(n,o,s,!1,null,null,null);e["a"]=l.exports},e573:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"accounts-page page-container"},[a("v-layout",{staticClass:"pa-1",attrs:{row:"",wrap:""}},[a("div",{staticClass:"page-title"},[t._v("用户账号")]),a("v-spacer"),a("v-btn",{attrs:{depressed:"",dark:"",color:"indigo accent-1"},on:{click:function(e){return t.doAdd()}}},[t._v("新增账号")]),a("v-btn",{attrs:{depressed:"",dark:"",color:"green lighten-2"},on:{click:function(e){return t.doRefresh()}}},[t._v("刷新")])],1),a("DataList"),a("FormDialog"),a("Confirm",{attrs:{show:t.deleteDialogShow,message:t.deleteDialogMessage},on:{confirm:function(e){return t.doConfirmDel()},cancel:function(e){return t.doCloseDelDialog()}}}),a("Confirm",{attrs:{show:t.resetPasswordDialogShow,message:t.resetPasswordDialogMessage},on:{confirm:function(e){return t.doConfirmResetPassword()},cancel:function(e){return t.doCloseResetPasswordDialog()}}})],1)},s=[],r=a("3556"),n=a("eb57"),i=a("0706"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-container pl-2 pr-2 pb-2"},[a("v-data-table",{attrs:{headers:t.headers,"hide-actions":"","disable-initial-sort":"",items:t.listData,"no-data-text":"Sorry！未能查询到数据！"},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[t._v(t._s(e.item.recordNo))]),a("td",[t._v(t._s(e.item.loginName))]),a("td",[t._v(t._s(e.item.realName))]),a("td",[t._v(t._s(e.item.lastLoginTime))]),a("td",[t._v(t._s(e.item.createdAt))]),a("td",[t._v(t._s(e.item.roleName))]),a("td",["0"!=e.item.role?a("v-btn",{staticClass:"indigo--text text--accent-1",attrs:{flat:"",small:""},on:{click:function(a){return t.editItem(e.item)}}},[t._v("修改")]):t._e(),"0"!=e.item.role?a("v-btn",{staticClass:"red--text text--accent-1",attrs:{flat:"",small:""},on:{click:function(a){return t.deleteItem(e.item)}}},[t._v("删除")]):t._e(),"0"!=e.item.role?a("v-btn",{staticClass:"indigo--text text--accent-1",attrs:{flat:"",small:""},on:{click:function(a){return t.resetPassword(e.item)}}},[t._v("重置密码")]):t._e()],1)]}}])}),a("Loading",{attrs:{show:t.dataLoading}})],1)},c=[],d=a("3a5e"),m=a("52c1"),u=i["a"].ACCOUNTS,f=Object(m["a"])(u).mapState,p={name:"AccountsDataList",computed:Object(r["a"])({},f(["dataLoading","listData"])),components:{Loading:d["a"]},data:function(){return{headers:[{text:"序号",align:"center",value:"recordNo",sortable:!1},{text:"登录名称",align:"center",value:"loginName",sortable:!1},{text:"真实名称",align:"center",value:"realName",sortable:!1},{text:"上次登录时间",align:"center",value:"lastLoginTime",sortable:!1},{text:"创建时间",align:"center",value:"createdAt",sortable:!1},{text:"角色",align:"center",value:"roleName",sortable:!1},{text:"操作",align:"center",value:"actions",sortable:!1}]}},methods:{deleteItem:function(t){this.$store.commit(u+"/"+n["a"].CHANGE_ACCOUNTS_DELETE_DIALOG_STATUS,{show:!0,id:t.id,message:"确定要删除这个账号：".concat(t.loginName,"？")})},editItem:function(t){this.$store.commit(u+"/"+n["a"].CHANGE_ACCOUNTS_FORM_DIALOG_STATUS,{show:!0,action:"Update",id:t.id})},resetPassword:function(t){this.$store.commit(u+"/"+n["a"].CHANGE_ACCOUNTS_RESET_PASSWORD_DIALOG_STATUS,{show:!0,id:t.id,message:"确定要重置此账号的密码：".concat(t.loginName,"？")})}}},w=p,g=a("17cc"),h=Object(g["a"])(w,l,c,!1,null,null,null),_=h.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{value:t.formDialogShow,width:"95%","max-width":"600px",persistent:""}},[a("v-card",[a("v-card-title",{staticClass:"deep-purple lighten-1 py-3 white--text text--darken-2",attrs:{"primary-title":""}},[t._v(t._s("Add"==t.formDialogAction?"添加":"修改")+"账号")]),a("v-card-text",{staticClass:"pb-0"},[a("v-form",{staticClass:"pr-1"},[a("input",{attrs:{type:"text",name:"userName",hidden:""}}),a("input",{attrs:{type:"text",name:"realName",hidden:""}}),a("input",{attrs:{type:"password",name:"password",hidden:""}}),a("input",{attrs:{type:"password",name:"confirmPassword",hidden:""}}),a("v-text-field",{ref:"loginNameInput",attrs:{"dont-fill-mask-blanks":"",error:t.loginNameError,autocomplete:"off",disabled:t.inprocess||"Update"==t.formDialogAction,name:"userName",label:"账号登录名称",type:"text",tabindex:"1",maxlength:"30"},model:{value:t.loginName,callback:function(e){t.loginName=e},expression:"loginName"}}),a("v-text-field",{ref:"realNameInput",attrs:{"dont-fill-mask-blanks":"",error:t.realNameError,autocomplete:"off",disabled:t.inprocess,name:"realName",label:"账号真实名称",type:"text",tabindex:"2",maxlength:"30"},model:{value:t.realName,callback:function(e){t.realName=e},expression:"realName"}}),a("v-text-field",{directives:[{name:"show",rawName:"v-show",value:"Add"==t.formDialogAction,expression:"formDialogAction == 'Add'"}],ref:"passwordInput",attrs:{"dont-fill-mask-blanks":"",error:t.passwordError,autocomplete:"new-password",disabled:t.inprocess,name:"password",label:"账号登录密码",type:"password",tabindex:"3",maxlength:"30"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),a("v-text-field",{directives:[{name:"show",rawName:"v-show",value:"Add"==t.formDialogAction,expression:"formDialogAction == 'Add'"}],ref:"confirmPasswordInput",attrs:{"dont-fill-mask-blanks":"",error:t.confirmPasswordError,autocomplete:"new-password",disabled:t.inprocess,name:"confirmPassword",label:"确认登录密码",type:"password",tabindex:"4",maxlength:"30"},model:{value:t.confirmPassword,callback:function(e){t.confirmPassword=e},expression:"confirmPassword"}})],1)],1),a("v-card-actions",{staticClass:"pb-3 pt-0"},[a("v-spacer"),a("v-btn",{attrs:{color:"indigo accent-1",dark:""},on:{click:function(e){return t.doCommit()}}},[t._v("确定")]),a("v-btn",{staticClass:"mr-2",attrs:{color:"blue lighten-1",dark:""},on:{click:function(e){return t.doClose()}}},[t._v("取消")])],1)],1),a("Loading",{attrs:{show:t.inprocess}})],1)},v=[],A=a("2919"),N=i["a"].ACCOUNTS,S=Object(m["a"])(N).mapState,b="$store.state.".concat(N,".formDialogShow"),E={name:"AccountsFormDialog",components:{Loading:d["a"]},computed:Object(r["a"])({},S(["formDialogShow","formDialogAction","formDialogId"])),watch:Object(A["a"])({},b,function(t){var e=this;if(t){if(t&&"Update"==e.formDialogAction){var a=e.$store;e.inprocess=!0,a.dispatch(N+"/"+n["a"].GET_ACCOUNT,e.formDialogId).then(function(t){e.loginName=t.loginName,e.realName=t.realName,e.inprocess=!1},function(t){e.showMessage(t,!1),e.inprocess=!1,setTimeout(function(){e.doClose()},1e3)})}}else e.loginName="",e.realName="",e.password="",e.confirmPassword="",e.loginNameError=!1,e.realNameError=!1,e.passwordError=!1,e.confirmPasswordError=!1,e.inprocess=!1}),data:function(){return{loginName:"",realName:"",password:"",confirmPassword:"",loginNameError:!1,realNameError:!1,passwordError:!1,confirmPasswordError:!1,inprocess:!1}},methods:{doCommit:function(){var t=this,e=t.$store;t.doCheckForm()&&(t.inprocess=!0,e.dispatch(N+"/"+n["a"].ADD_OR_UPDATE_ACCOUNT,{action:t.formDialogAction,id:t.formDialogId,loginName:t.loginName.trim(),realName:t.realName.trim(),password:t.password}).then(function(a){t.showMessage(a,!0),t.inprocess=!1,t.doClose(),e.dispatch(i["a"].ACCOUNTS+"/"+n["a"].GET_ALL_ACCOUNTS)},function(e){t.showMessage(e,!1),t.inprocess=!1}))},doClose:function(){var t=this;t.$store.commit(i["a"].ACCOUNTS+"/"+n["a"].CHANGE_ACCOUNTS_FORM_DIALOG_STATUS,{isShow:!1})},doCheckForm:function(){var t=this,e=t.$refs;if("Add"==t.formDialogAction&&!t.loginName.trim())return e.loginNameInput.focus(),t.loginNameError=!0,t.showMessage("请输入登录账号！",!1),!1;if(t.loginNameError=!1,!t.realName.trim())return e.realNameInput.focus(),t.realNameError=!0,t.showMessage("请输入账号真实名称！",!1),!1;if(t.realNameError=!1,"Add"==t.formDialogAction){if(!t.password)return e.passwordInput.focus(),t.passwordError=!0,t.showMessage("请输入账号密码！",!1),!1;if(t.passwordError=!1,!t.confirmPassword)return e.confirmPasswordInput.focus(),t.confirmPasswordError=!0,t.showMessage("请确认账号密码！",!1),!1;if(t.confirmPasswordError=!1,t.password!=t.confirmPassword)return t.showMessage("两次输入的密码不一致！",!1),!1}return!0},showMessage:function(t,e){var a=this;a.$store.commit(n["a"].SWITCH_GLOABL_MESSAGE,{show:!0,content:t,status:e?"success":"error",delay:1500})}}},D=E,T=Object(g["a"])(D,C,v,!1,null,null,null),x=T.exports,O=a("9420"),L=i["a"].ACCOUNTS,k=Object(m["a"])(L).mapState,P={name:"Accounts",components:{DataList:_,FormDialog:x,Confirm:O["a"]},computed:Object(r["a"])({},k(["deleteDialogShow","deleteDialogMessage","resetPasswordDialogShow","resetPasswordDialogMessage"])),created:function(){var t=this,e=t.$store;e.dispatch(L+"/"+n["a"].GET_ALL_ACCOUNTS),e.commit(n["a"].SWITCH_LOADING,!1)},methods:{doAdd:function(){var t=this;t.$store.commit(L+"/"+n["a"].CHANGE_ACCOUNTS_FORM_DIALOG_STATUS,{show:!0,action:"Add"})},doRefresh:function(){this.$store.dispatch(L+"/"+n["a"].GET_ALL_ACCOUNTS)},doConfirmDel:function(){var t=this,e=t.$store;t.doCloseDelDialog(),e.dispatch(L+"/"+n["a"].DELETE_ACCOUNT).then(function(t){e.commit(n["a"].SWITCH_GLOABL_MESSAGE,{show:!0,content:t,status:"success",delay:1500}),e.dispatch(L+"/"+n["a"].GET_ALL_ACCOUNTS)},function(t){e.commit(n["a"].SWITCH_GLOABL_MESSAGE,{show:!0,content:t,status:"error",delay:1500})})},doCloseDelDialog:function(){this.$store.commit(L+"/"+n["a"].CHANGE_ACCOUNTS_DELETE_DIALOG_STATUS,{show:!1})},doConfirmResetPassword:function(){var t=this,e=t.$store;t.doCloseResetPasswordDialog(),e.dispatch(L+"/"+n["a"].ACCOUNT_RESET_PASSWORD).then(function(t){e.commit(n["a"].SWITCH_GLOABL_MESSAGE,{show:!0,content:t,status:"success",delay:4500})},function(t){e.commit(n["a"].SWITCH_GLOABL_MESSAGE,{show:!0,content:t,status:"error",delay:1500})})},doCloseResetPasswordDialog:function(){this.$store.commit(L+"/"+n["a"].CHANGE_ACCOUNTS_RESET_PASSWORD_DIALOG_STATUS,{show:!1})}}},U=P,G=(a("60ca"),Object(g["a"])(U,o,s,!1,null,null,null));e["default"]=G.exports}}]);