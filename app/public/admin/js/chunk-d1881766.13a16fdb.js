(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d1881766"],{"0337":function(e,t,a){},"3a5e":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"data-table-loading"},[a("v-progress-circular",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white",size:90}})],1)},o=[],n={name:"DataTableLoading",props:{show:{type:Boolean,default:!0}}},s=n,i=a("6691"),c=Object(i["a"])(s,r,o,!1,null,null,null);t["a"]=c.exports},"3aef":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"resource-page page-container"},[a("v-layout",{staticClass:"pa-1",attrs:{row:"",wrap:""}},[a("div",{staticClass:"page-title"},[e._v("资源列表")]),a("v-spacer"),a("v-btn",{attrs:{depressed:"",dark:"",color:"indigo accent-1"},on:{click:function(t){return e.doAdd()}}},[e._v("新增")]),a("v-btn",{attrs:{depressed:"",dark:"",color:"green lighten-2"},on:{click:function(t){return e.doRefresh()}}},[e._v("刷新")])],1),a("DataList"),a("FormDialog"),a("Confirm",{attrs:{show:e.deleteDialogShow,message:e.deleteDialogMessage},on:{confirm:function(t){return e.doConfirmDel()},cancel:function(t){return e.doCloseDelDialog()}}})],1)},o=[],n=(a("2338"),a("f763"),a("fb37"),a("a506")),s=a("eb57"),i=a("0706"),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table-container pl-2 pr-2 pb-2"},[a("div",{staticClass:"search-input-wrap",attrs:{hidden:""}},[a("v-text-field",{attrs:{box:"","dont-fill-mask-blanks":"","single-line":"",color:"indigo accent-1",autocomplete:"off",disabled:e.dataLoading,"append-icon":"search",name:"searchKeys",label:"搜索...",type:"text",tabindex:"1",maxlength:"30"},on:{"click:append":function(t){return e.doSearch()}},model:{value:e.searchKeys,callback:function(t){e.searchKeys=t},expression:"searchKeys"}})],1),a("v-data-table",{attrs:{headers:e.headers,"hide-actions":"","disable-initial-sort":"",items:e.listData,"no-data-text":"Sorry！未能查询到数据！"},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[e._v(e._s(t.item.recordNo))]),a("td",[a("a",{staticClass:"link",attrs:{href:t.item.path,target:"_blank"}},[e._v(e._s(t.item.path))])]),a("td",[e._v(e._s(t.item.type))]),a("td",[e._v(e._s(t.item.fileSize))]),a("td",[e._v(e._s(t.item.remark))]),a("td",[t.item.isImage?a("img",{attrs:{src:t.item.path}}):e._e()]),a("td",[e._v(e._s(t.item.loginName))]),a("td",[e._v(e._s(t.item.createdAt))]),a("td",[a("v-btn",{staticClass:"red--text text--accent-1",attrs:{flat:"",small:""},on:{click:function(a){return e.deleteItem(t.item)}}},[e._v("删除")])],1)]}}])}),e.totalPage>0?a("div",{staticClass:"text-xs-center pt-3 pb-1"},[a("v-pagination",{attrs:{color:"indigo accent-1",circle:"",length:e.totalPage,"total-visible":7},on:{input:function(t){return e.doPageChange()}},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1):e._e(),a("Loading",{attrs:{show:e.dataLoading}})],1)},l=[],p=a("3a5e"),u=a("591a");function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(a,!0).forEach(function(t){Object(n["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var m=i["a"].RES,h=Object(u["a"])(m).mapState,g={name:"ResDataList",computed:f({},h(["dataLoading","listData","totalPage"])),components:{Loading:p["a"]},data:function(){return{headers:[{text:"序号",align:"center",value:"recordNo",sortable:!1},{text:"路径",align:"center",value:"path",sortable:!1},{text:"类型",align:"center",value:"type",sortable:!1},{text:"大小",align:"center",value:"fileSize",sortable:!1},{text:"备注",align:"center",value:"remark",sortable:!1},{text:"预览",align:"center",value:"preview",sortable:!1},{text:"作者",align:"center",value:"loginName",sortable:!1},{text:"添加时间",align:"center",value:"createdAt",sortable:!1},{text:"操作",align:"center",value:"actions",sortable:!1}],searchKeys:"",currentPage:1,currentPageSize:15}},created:function(){var e=this,t=e.$store,a=e.$route.query;e.searchKeys=a.key?decodeURIComponent(a.key):"",e.currentPage=(a.page||1)-0,e.currentPageSize=(a.size||15)-0,e.queryData(),t.commit(s["a"].SWITCH_LOADING,!1)},methods:{deleteItem:function(e){this.$store.commit(m+"/"+s["a"].CHANGE_RES_DELETE_DIALOG_STATUS,{show:!0,id:e.id,message:"确定要删除此资源？"})},doSearch:function(){var e=this;e.currentPage=1,e.searchKeys=e.searchKeys.trim(),e.queryData()},doPageChange:function(){this.queryData()},queryData:function(){var e=this,t=e.$store;t.dispatch(m+"/"+s["a"].GET_RES,{page:e.currentPage,size:e.currentPageSize,key:e.searchKeys})}}},v=g,b=a("6691"),y=Object(b["a"])(v,c,l,!1,null,null,null),_=y.exports,O=a("9420"),w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{value:e.formDialogShow,width:"95%","max-width":"700px",persistent:""}},[a("v-card",[a("v-card-title",{staticClass:"deep-purple lighten-1 py-3 white--text text--darken-2",attrs:{"primary-title":""}},[e._v("添加资源")]),a("v-card-text",{staticClass:"pb-0"},[a("v-form",{staticClass:"pr-1"},[a("v-text-field",{ref:"pathInput",attrs:{"dont-fill-mask-blanks":"",disabled:"",error:e.pathError,autocomplete:"off",name:"path",label:"资源链接",type:"text",tabindex:"1",maxlength:"500"},model:{value:e.path,callback:function(t){e.path=t},expression:"path"}}),a("v-text-field",{ref:"typeInput",attrs:{"dont-fill-mask-blanks":"",disabled:"",error:e.typeError,autocomplete:"off",name:"type",label:"资源类型",type:"text",tabindex:"2",maxlength:"50"},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}}),a("v-text-field",{ref:"sizeInput",attrs:{"dont-fill-mask-blanks":"",disabled:"",error:e.sizeError,autocomplete:"off",name:"size",label:"资源大小",type:"text",tabindex:"3",maxlength:"50"},model:{value:e.size,callback:function(t){e.size=t},expression:"size"}}),a("v-text-field",{ref:"remarkInput",attrs:{"dont-fill-mask-blanks":"",error:e.remarkError,autocomplete:"off",disabled:e.inprocess,name:"remark",label:"资源备注",type:"text",tabindex:"4",maxlength:"100"},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}})],1),a("div",{staticClass:"file-selector-wrap"},[a("v-btn",{attrs:{color:"green lighten-2",dark:""}},[e._v("选择文件")]),a("input",{ref:"fileup",attrs:{type:"file"},on:{change:function(t){return e.doUploadFile()}}})],1)],1),a("v-card-actions",{staticClass:"pb-3 pt-0"},[a("v-spacer"),a("v-btn",{attrs:{color:"indigo accent-1",dark:""},on:{click:function(t){return e.doCommit()}}},[e._v("确定")]),a("v-btn",{staticClass:"mr-2",attrs:{color:"blue lighten-1",dark:""},on:{click:function(t){return e.doClose()}}},[e._v("取消")])],1)],1),a("Loading",{attrs:{show:e.inprocess}})],1)},k=[],E=a("46f1");function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(a,!0).forEach(function(t){Object(n["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var D=i["a"].RES,C=Object(u["a"])(D).mapState,j="$store.state.".concat(D,".formDialogShow"),P={name:"ResFormDialog",components:{Loading:p["a"]},computed:S({},C(["formDialogShow","formDialogAction","formDialogId"])),watch:Object(n["a"])({},j,function(e){var t=this;e||(t.path="",t.remark="",t.type="",t.size="",t.pathError=!1,t.remarkError=!1,t.typeError=!1,t.sizeError=!1,t.inprocess=!1)}),data:function(){return{path:"",remark:"",type:"",size:"",pathError:!1,remarkError:!1,typeError:!1,sizeError:!1,inprocess:!1}},methods:{doCommit:function(){var e=this,t=e.$store;e.doCheckForm()&&(e.inprocess=!0,t.dispatch(D+"/"+s["a"].ADD_RES,{id:e.formDialogId,path:e.path.trim(),remark:e.remark.trim(),type:e.type,size:e.size-0}).then(function(a){e.showMessage(a,!0),e.inprocess=!1,e.doClose(),t.dispatch(D+"/"+s["a"].GET_RES)},function(t){e.showMessage(t,!1),e.inprocess=!1}))},doClose:function(){var e=this;e.$store.commit(D+"/"+s["a"].CHANGE_RES_FORM_DIALOG_STATUS,!1)},doCheckForm:function(){var e=this,t=e.$refs;return e.path.trim()?(e.pathError=!1,!0):(t.pathInput.focus(),e.pathError=!0,e.showMessage("需要输入资源链接！",!1),!1)},showMessage:function(e,t){var a=this;a.$store.commit(s["a"].SWITCH_GLOABL_MESSAGE,{show:!0,content:e,status:t?"success":"error",delay:1500})},doUploadFile:function(){var e=this,t=e.$refs.fileup,a=t.files[0];if(a){e.inprocess=!0;var r=new FormData;r.append("multipartfiles",a),e.$ajax({url:E["a"].upload,method:"post",data:r,headers:{"Content-Type":"multipart/form-data"}}).then(function(t){console.log("upload res...",t),e.inprocess=!1,t&&t.url?(e.showMessage("上传成功！",!0),e.path=t.url,e.type=t.type,e.size=t.size):e.showMessage(t.message||"上传出错！",!1)},function(){e.showMessage("请求出错！",!1),e.inprocess=!1})}}}},A=P,L=Object(b["a"])(A,w,k,!1,null,null,null),z=L.exports;function $(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?$(a,!0).forEach(function(t){Object(n["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var T=i["a"].RES,I=Object(u["a"])(T).mapState,G={name:"Res",components:{DataList:_,Confirm:O["a"],FormDialog:z},computed:R({},I(["deleteDialogShow","deleteDialogMessage"])),methods:{doAdd:function(){var e=this;e.$store.commit(T+"/"+s["a"].CHANGE_RES_FORM_DIALOG_STATUS,!0)},doRefresh:function(){this.$store.dispatch(T+"/"+s["a"].GET_RES)},doConfirmDel:function(){var e=this,t=e.$store;e.doCloseDelDialog(),t.dispatch(T+"/"+s["a"].DELETE_RES).then(function(e){t.commit(s["a"].SWITCH_GLOABL_MESSAGE,{show:!0,content:e,status:"success",delay:1500}),t.dispatch(T+"/"+s["a"].GET_RES)},function(e){t.commit(s["a"].SWITCH_GLOABL_MESSAGE,{show:!0,content:e,status:"error",delay:1500})})},doCloseDelDialog:function(){this.$store.commit(T+"/"+s["a"].CHANGE_RES_DELETE_DIALOG_STATUS,{show:!1})}}},M=G,F=(a("b517"),Object(b["a"])(M,r,o,!1,null,null,null));t["default"]=F.exports},9420:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{value:e.show,width:"95%","max-width":"600px",persistent:""}},[a("v-card",[a("v-card-title",{staticClass:"deep-purple lighten-1 py-3 white--text text--darken-2",attrs:{"primary-title":""}},[e._v(e._s(e.title))]),a("v-card-text",{staticClass:"pa-4 red--text text--accent-1"},[e._v(e._s(e.message))]),a("v-card-actions",{staticClass:"pb-3 pt-0"},[a("v-spacer"),a("v-btn",{attrs:{color:"indigo accent-1",dark:""},on:{click:function(t){return e.doConfirm()}}},[e._v("确定")]),a("v-btn",{staticClass:"mr-2",attrs:{color:"blue lighten-1",dark:""},on:{click:function(t){return e.doCancel()}}},[e._v("取消")])],1)],1)],1)},o=[],n={name:"Confirm",props:{show:{type:Boolean,default:!1},title:{type:String,default:"提醒"},message:{type:String,default:""}},methods:{doConfirm:function(){this.$emit("confirm")},doCancel:function(){this.$emit("cancel")}}},s=n,i=a("6691"),c=Object(i["a"])(s,r,o,!1,null,null,null);t["a"]=c.exports},b517:function(e,t,a){"use strict";var r=a("0337"),o=a.n(r);o.a}}]);